#!/bin/sh
while IFS=: read -r k v; do
    case "$k" in
    *"Absolute upper-left X"*) x=$v;;
    *"Absolute upper-left Y"*) y=$v;;
    *"Border width"*) bw=$v ;;
    *"Width"*) w=$v;;
    *"Height"*) h=$v;;
    esac
done << EOF
    $(xwininfo)
EOF

for i in 3 2 1; do
    notify-send -t 1000 -c "recording" "$i"
    sleep 1
done

ffmpeg -y -f x11grab -framerate 30 \
       -video_size "$((w))x$((h))" \
       -i ":0.0+$((x+bw)),$((y+bw))" \
       "$HOME/Videos/Screencast_$(date +%Y%m%d_%H%M%S).mp4"
